<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title></title>
		<base href="${base_url}" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection" />
        <link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print" />
        <!--[if IE]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection" /><![endif]-->
        <link rel="stylesheet" href="css/commons.css" type="text/css" media="screen, projection" />
        <link rel="stylesheet" href="css/page_template_styles.css" type="text/css" media="screen, projection" />
        <link rel="stylesheet" href="css/plugins/myportal/myportal.css" type="text/css" media="screen, projection" />
        <script src="js/jquery/jquery-1.5.min.js" type="text/javascript"></script>
        
        <script type="text/javascript">
        		function addImgLoading(  ) {
        			var imgLoadingHtml = '<div class="myportal-widgets-list-content">';
        			imgLoadingHtml += '<img src="images/skin/plugins/myportal/loading.gif" alt="Loading" title="Loading" />';
        			imgLoadingHtml += '</div>';
        			$( '.myportal-widgets-list' ).append( imgLoadingHtml );
        		}
    		
        		function reloadWidgetsList( link, idCategory ) {
	        		$( '.myportal-categories-list a' ).each( function( i ) {
			    		if ( $( this ).hasClass( 'active' ) ) {
			    			$( this ).removeClass( 'active' );
			    		}
			    	} );
        			$( link ).addClass( 'active' );
        			$( '.myportal-widgets-list-content' ).remove(  );
        			addImgLoading(  );
        			$.ajax( { 
        				url : "${base_url}jsp/site/plugins/myportal/AddWidget.jsp?category_id_category=" + idCategory,
        				cache : false,
        				error : function( msg ) {
        					alert( '#i18n{myportal.browse_categories.messageErrorAjax}' );
        				},
        				success : function( data ) {
        					$( '.myportal-widgets-list-content' ).remove(  );
        					$( '.myportal-widgets-list' ).append( data );
        				}
        			} );
        		}
        </script>
	</head>
    <body>
    	<div class="myportal-ceebox">
    		<div class="myportal-categories-list">
    			<h3>#i18n{myportal.browse_categories.labelExploreCategories}</h3>
    			<br />
    			<#if categories_list?has_content>
	    			<ul>
	    				<#list categories_list as category>
	    					<li>
	    						<a href="jsp/site/plugins/myportal/BrowseCategories.jsp?category_id_category=${category.idCategory}" onclick="reloadWidgetsList( this, ${category.idCategory} );return false;" 
	    							<#if category_id_category == category.idCategory?string>
	    								class="active"
	    							</#if>
	    						>
	    							${category.name}
	    						</a>
	    					</li>
	    				</#list>
	    			</ul>
    			</#if>
	    	</div>
	    	<div class="myportal-widgets-list">
	    		${widgets_list_html}
	    	</div>
   			<div class="clear"></div>
   		</div>
    </body>
</html>
